# Output the KV mount path for use by other resources
output "kv_mount_path" {
  description = "Path to the KV v2 mount"
  value       = vault_mount.kv.path
}

# Output the mount accessor
output "kv_mount_accessor" {
  description = "Accessor ID for the KV v2 mount"
  value       = vault_mount.kv.accessor
}

# Output the mount description
output "kv_mount_description" {
  description = "Description of the KV v2 mount"
  value       = vault_mount.kv.description
}

# Environment variables for accessing this mount
output "environments" {
  description = "Environment variables for this KV mount"
  value = {
    "VAULT_MOUNT_PATH" = vault_mount.kv.path
  }
}

# Usage notes
output "usage_notes" {
  description = "Instructions for using this KV v2 mount"
  value = <<-EOT
    KV v2 Mount Created
    ═══════════════════

    Mount Path: ${vault_mount.kv.path}
    Mount Type: kv-v2
    Accessor:   ${vault_mount.kv.accessor}

    CLI Usage:
    ─────────
    # Write a secret
    vault kv put ${vault_mount.kv.path}/myapp/config username="admin" password="secret"

    # Read a secret
    vault kv get ${vault_mount.kv.path}/myapp/config

    # List secrets
    vault kv list ${vault_mount.kv.path}/myapp

    # Delete latest version
    vault kv delete ${vault_mount.kv.path}/myapp/config

    This mount is ready to store secrets for the environment.
    Use the secret plugin to create and manage secrets in this mount.
  EOT
}

# Summary metadata
output "mount_metadata" {
  description = "Summary of the KV mount configuration"
  value = {
    path        = vault_mount.kv.path
    type        = vault_mount.kv.type
    accessor    = vault_mount.kv.accessor
    description = vault_mount.kv.description
  }
}
