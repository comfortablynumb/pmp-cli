# Application Configuration
variable "project" {
  description = "ArgoCD project name"
  type        = string
  default     = "{{project}}"
}

variable "app_description" {
  description = "Description of the application"
  type        = string
  default     = "{{app_description}}"
}

# Source Configuration
variable "helm_repo_url" {
  description = "Helm repository URL"
  type        = string
  default     = "{{helm_repo_url}}"
}

variable "chart_name" {
  description = "Name of the Helm chart in the repository"
  type        = string
  default     = "{{chart_name}}"
}

variable "target_revision" {
  description = "Chart version to deploy (optional, defaults to latest)"
  type        = string
  default     = "{{target_revision}}"
}

# Helm Configuration
variable "helm_release_name" {
  description = "Helm release name (defaults to project name if empty)"
  type        = string
  default     = "{{helm_release_name}}"
}

variable "helm_values" {
  description = "Inline Helm values as YAML string"
  type        = string
  default     = <<-EOT
{{helm_values}}
  EOT
}

variable "helm_values_files" {
  description = "List of values file paths in the repository"
  type        = list(string)
  default     = [{{#if helm_values_files}}{{#each (split helm_values_files ",")}}
    "{{trim this}}",{{/each}}{{/if}}]
}

variable "helm_parameters" {
  description = "Helm parameters as list of objects with name and value"
  type = list(object({
    name         = string
    value        = string
    force_string = optional(bool, false)
  }))
  default = [{{#if helm_parameters}}{{#each (split helm_parameters ",")}}
    {
      name  = "{{trim (split this "=")[0]}}"
      value = "{{trim (split this "=")[1]}}"
    },{{/each}}{{/if}}]
}

# Destination Configuration
variable "destination_namespace" {
  description = "Target Kubernetes namespace for deployment"
  type        = string
  default     = "{{destination_namespace}}"
}

variable "destination_server" {
  description = "Target Kubernetes cluster API server URL"
  type        = string
  default     = "{{destination_server}}"
}
