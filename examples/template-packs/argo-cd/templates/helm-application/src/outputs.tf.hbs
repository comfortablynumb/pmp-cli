# Application Information
output "application_name" {
  description = "Name of the ArgoCD Application"
  value       = argocd_application.app.metadata[0].name
}

output "application_namespace" {
  description = "Namespace where the ArgoCD Application resource is created"
  value       = argocd_application.app.metadata[0].namespace
}

output "application_uid" {
  description = "Unique identifier of the ArgoCD Application"
  value       = argocd_application.app.metadata[0].uid
}

# Source Configuration
output "helm_repository_url" {
  description = "Helm repository URL"
  value       = var.helm_repo_url
}

output "chart_name" {
  description = "Name of the Helm chart"
  value       = var.chart_name
}

output "target_revision" {
  description = "Chart version being deployed"
  value       = var.target_revision
}

# Deployment Target
output "destination_namespace" {
  description = "Kubernetes namespace where the application is deployed"
  value       = var.destination_namespace
}

output "destination_server" {
  description = "Target Kubernetes cluster"
  value       = var.destination_server
}

# Access Instructions
output "usage_instructions" {
  description = "Instructions for viewing and managing the application"
  value       = <<-EOT
    ArgoCD Application '${argocd_application.app.metadata[0].name}' has been created successfully.

    To view the application in ArgoCD UI:
    1. Access your ArgoCD server
    2. Navigate to Applications
    3. Look for: ${argocd_application.app.metadata[0].name}

    To sync the application manually:
      argocd app sync ${argocd_application.app.metadata[0].name}

    To view application status:
      argocd app get ${argocd_application.app.metadata[0].name}

    To view application logs:
      argocd app logs ${argocd_application.app.metadata[0].name}

    Configuration:
      Helm Repository: ${var.helm_repo_url}
      Chart Name:      ${var.chart_name}
      Chart Version:   ${var.target_revision != "" ? var.target_revision : "latest"}
      Namespace:       ${var.destination_namespace}
  EOT
}
