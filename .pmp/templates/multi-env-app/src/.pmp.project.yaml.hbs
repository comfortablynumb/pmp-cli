apiVersion: {{pmp_resource_api_version}}
kind: {{pmp_resource_kind}}
metadata:
  name: "{{pmp_name}}"
  description: "{{app_name}} - Multi-environment application in {{region}}"
spec:
  iac:
    executor: opentofu
    commands:
      plan: "tofu plan -out=tfplan"
      apply: "tofu apply tfplan"
  hooks:
    pre_preview:
      - "echo 'Validating {{pmp_environment}} environment configuration for {{app_name}}'"
    post_apply:
      - "echo 'Successfully deployed {{app_name}} to {{pmp_environment}} with {{replicas}} replica(s)'"
      - "echo 'Instance type: {{instance_type}}'"
      - "echo 'Monitoring enabled: {{enable_monitoring}}'"
