apiVersion: {{pmp_resource_api_version}}
kind: {{pmp_resource_kind}}
metadata:
  name: "{{pmp_name}}"
  description: "{{pmp_name}} - Kubernetes workload in {{namespace}}"
spec:
  iac:
    executor: opentofu
    commands:
      plan: "tofu plan"
      apply: "tofu apply -auto-approve"
  hooks:
    pre_preview:
      - "echo 'Starting preview for {{pmp_name}}'"
    post_apply:
      - "echo 'Successfully deployed {{pmp_name}} to {{pmp_environment}}'"
